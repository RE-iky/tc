# 问题报告模板

> 本模板用于标准化问题报告的记录格式。复制此模板内容，填写相关信息后保存到项目文档中。

---

## 基本信息

### 问题[编号]: [问题标题]

**严重程度**: [🔴/🟡/🟢] [高/中/低]  
**状态**: [调查中/已修复/待修复]  
**位置**: [相关文件或模块]  
**报告日期**: [YYYY-MM-DD]  
**报告人**: [姓名]

---

## 问题描述

### 症状

[详细描述问题的具体表现，包括：]
- 问题发生的场景
- 预期行为
- 实际行为
- 复现步骤（如适用）

---

## 原因分析

### 可能原因

1. **原因1**: [描述]
2. **原因2**: [描述]
3. **原因3**: [描述]

---

## 解决方案

### 已尝试的解决方案

- ✅ **方案1** - [描述] → 结果: [成功/失败/部分有效]
- ⏳ **方案2** - [描述] → 状态: [进行中]
- ❌ **方案3** - [描述] → 结果: [无效]

### 下一步调试计划

1. **步骤1**: [具体行动]
2. **步骤2**: [具体行动]
3. **步骤3**: [具体行动]

---

## 技术细节

### 相关代码

```[语言]
// 粘贴相关代码片段
```

### 错误日志

```
// 粘贴错误日志或堆栈跟踪
```

### 环境信息

- **操作系统**: [例如: Windows 11, macOS 14, Ubuntu 22.04]
- **浏览器**: [例如: Chrome 120, Firefox 121]
- **Node.js版本**: [例如: v20.10.0]
- **依赖版本**: [列出相关依赖的版本]

---

## 影响范围

### 受影响的功能

- [功能1]
- [功能2]
- [功能3]

### 受影响的用户群体

- [用户群体1，例如：视障用户]
- [用户群体2，例如：所有用户]

---

## 附加信息

### 相关问题

- 问题#[编号]: [标题]
- 问题#[编号]: [标题]

### 参考资源

- [文档链接]
- [相关讨论]
- [外部资源]

---

## 使用示例

以下是一个填写完整的问题报告示例：

---

### 问题001: 视频字幕加载失败

**严重程度**: 🟡 中  
**状态**: 调查中  
**位置**: `src/components/VideoPlayer.tsx`, `server/src/controllers/subtitleController.ts`  
**报告日期**: 2026-02-11  
**报告人**: 张三

---

#### 症状

在视频播放页面，当用户点击"加载字幕"按钮时，字幕无法正常显示。控制台显示404错误。

- **预期行为**: 点击按钮后，字幕应该加载并显示在视频下方
- **实际行为**: 字幕未加载，控制台显示 `GET /api/subtitles/video123 404 Not Found`
- **复现步骤**:
  1. 登录系统
  2. 进入任意课程的视频页面
  3. 点击"加载字幕"按钮
  4. 观察控制台错误

---

#### 可能原因

1. **API路由配置错误**: 后端路由可能未正确注册
2. **文件路径问题**: 字幕文件存储路径可能不正确
3. **权限问题**: 用户可能没有访问字幕资源的权限

---

#### 已尝试的解决方案

- ✅ **检查API路由** - 确认路由已在 `server/src/index.ts` 中注册 → 结果: 路由配置正确
- ⏳ **验证文件存储** - 检查字幕文件是否存在于服务器 → 状态: 进行中
- ❌ **清除浏览器缓存** - 尝试清除缓存后重新加载 → 结果: 问题依然存在

#### 下一步调试计划

1. **检查文件系统**: 验证 `server/subtitles/` 目录中是否存在对应的字幕文件
2. **添加日志**: 在 `subtitleController.ts` 中添加详细日志，追踪请求处理流程
3. **测试API端点**: 使用Postman直接测试API端点，排除前端问题

---

#### 相关代码

```typescript
// src/components/VideoPlayer.tsx
const loadSubtitles = async (videoId: string) => {
  try {
    const response = await axios.get(`/api/subtitles/${videoId}`);
    setSubtitles(response.data);
  } catch (error) {
    console.error('Failed to load subtitles:', error);
  }
};
```

#### 错误日志

```
GET http://localhost:3000/api/subtitles/video123 404 (Not Found)
Error: Request failed with status code 404
    at createError (createError.js:16)
    at settle (settle.js:17)
    at XMLHttpRequest.handleLoad (xhr.js:61)
```

#### 环境信息

- **操作系统**: Windows 11
- **浏览器**: Chrome 120.0.6099.129
- **Node.js版本**: v20.10.0
- **依赖版本**: axios@1.6.2, react@18.2.0

---

#### 受影响的功能

- 视频字幕显示
- 听障用户的学习体验
- AI术语解释功能（依赖字幕）

#### 受影响的用户群体

- 听障用户（高优先级）
- 所有需要字幕辅助的用户

---

#### 相关问题

- 问题#002: 字幕同步延迟问题

#### 参考资源

- [字幕API设计文档](../specs/subtitle-system/design.md)
- [视频播放器组件文档](../docs/components/video-player.md)

---

**示例结束**

---

## 填写指南

### 严重程度判断标准

- **🔴 高**: 阻塞核心功能，影响大量用户，需要立即修复
- **🟡 中**: 影响用户体验，但有替代方案，应尽快修复
- **🟢 低**: 轻微问题，不影响主要功能，可以延后修复

### 状态说明

- **调查中**: 正在分析问题原因
- **已修复**: 问题已解决并验证
- **待修复**: 已确定原因，等待实施修复

### 最佳实践

1. **具体明确**: 提供足够的细节，让其他人能够理解和复现问题
2. **及时更新**: 随着调查进展，及时更新问题状态和解决方案
3. **关联信息**: 链接相关的代码、文档和其他问题
4. **保持客观**: 描述事实，避免主观臆断
5. **考虑影响**: 明确问题对用户和系统的影响范围

---

**模板版本**: v1.0  
**最后更新**: 2026-02-11
